"use strict";(self.webpackChunksalon_belleza=self.webpackChunksalon_belleza||[]).push([[592],{7835:(J,E,o)=>{o.d(E,{i:()=>V});var a=o(4006),h=o(2340),c=o(2619),e=o(4650),v=o(7396),C=o(4988),S=o(2411),M=o(9651),T=o(7),I=o(2587),A=o(7341),u=o(6895),D=o(6616),O=o(7044),P=o(1811),f=o(3679),s=o(6704),U=o(7423),m=o(5635),g=o(8231),x=o(4855);function y(t,r){1&t&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1,"Campo obligatorio."),e.\u0275\u0275elementContainerEnd())}function R(t,r){1&t&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1," Email incorrecto "),e.\u0275\u0275elementContainerEnd())}function L(t,r){if(1&t&&(e.\u0275\u0275template(0,y,2,0,"ng-container",26),e.\u0275\u0275template(1,R,2,0,"ng-container",26)),2&t){const n=r.$implicit;e.\u0275\u0275property("ngIf",n.hasError("required")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.hasError("email"))}}function b(t,r){1&t&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1,"Campo obligatorio."),e.\u0275\u0275elementContainerEnd())}function K(t,r){1&t&&e.\u0275\u0275template(0,b,2,0,"ng-container",26),2&t&&e.\u0275\u0275property("ngIf",r.$implicit.hasError("required"))}function B(t,r){1&t&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1,"Campo obligatorio."),e.\u0275\u0275elementContainerEnd())}function N(t,r){1&t&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1," Colocar una contrase\xf1a de m\xednimo 8 car\xe1cteres "),e.\u0275\u0275elementContainerEnd())}function W(t,r){if(1&t&&(e.\u0275\u0275template(0,B,2,0,"ng-container",26),e.\u0275\u0275template(1,N,2,0,"ng-container",26)),2&t){const n=r.$implicit;e.\u0275\u0275property("ngIf",n.hasError("required")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.hasError("minlength"))}}function F(t,r){1&t&&e.\u0275\u0275element(0,"i",29)}function w(t,r){if(1&t&&e.\u0275\u0275element(0,"img",30),2&t){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",n.avatarUrlNewSponsor,e.\u0275\u0275sanitizeUrl)}}function j(t,r){if(1&t&&(e.\u0275\u0275template(0,F,1,0,"i",27),e.\u0275\u0275template(1,w,1,1,"img",28)),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",n.loadingSearch),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isSponsorNew)}}function X(t,r){if(1&t&&e.\u0275\u0275element(0,"nz-option",31),2&t){const n=r.$implicit;e.\u0275\u0275property("nzValue",n.id)("nzLabel",n.title)}}let V=(()=>{class t{constructor(n,l,i,d,p,_,G,$){this.fb=n,this.router=l,this.apiService=i,this.formValidator=d,this.message=p,this.nzModalService=_,this.modalService=G,this.themeService=$,this.loadingSubmit=!1,this.planList=[],this.avatarUrlNewSponsor=c.t.IMAGE.FALLBACK,this.isSponsorNew=!1,this.loadingSearch=!1,this.frmRegister=this.fb.group({userName:[null,[a.kI.required]],email:[null,[a.kI.required,a.kI.email]],dni:[null,[a.kI.required]],password:[null,[a.kI.required,a.kI.minLength(8)]],sponsor:[null,[a.kI.required]],plan:[null,[a.kI.required]]}),this.themeService.isAdminUserChanges.subscribe(z=>{this.isAdmin=z,z||(this.frmRegister.get("sponsor").setValue(localStorage.getItem("uuid")),this.frmRegister.get("sponsor").disable())})}ngOnInit(){this.loadPlans()}command(){return{name:this.frmRegister.get("userName")?.value,email:this.frmRegister.get("email")?.value,dni:this.frmRegister.get("dni")?.value,password:this.frmRegister.get("password")?.value,sponsor:this.frmRegister.get("sponsor")?.value,plan:this.frmRegister.get("plan")?.value}}onSubmit(){this.formValidator.validForm(this.frmRegister)&&(this.loadingSubmit=!0,this.apiService.postUserCreate(this.command()).subscribe(n=>{this.nzModalService.closeAll(),this.modalService.success("Se creo el usuario correctamente"),this.loadingSubmit=!1},n=>{console.log(n),this.nzModalService.closeAll(),this.modalService.error(n.message??"Ocurrio un error!!!"),this.loadingSubmit=!1}))}onSearchSponsor(){this.loadingSearch=!0,this.isSponsorNew=!1,this.apiService.getUsersSearch({code:this.frmRegister.get("sponsor").value??""}).subscribe(n=>{this.loadingSearch=!1,this.newSponsor=null,n.success&&n.data.length>0&&(this.isSponsorNew=!0,this.newSponsor=n.data[0],this.avatarUrlNewSponsor=n.data[0]?.file?.path?h.N.hostUrl+"/storage/"+n.data[0]?.file?.path:c.t.IMAGE.FALLBACK)},n=>{this.loadingSearch=!1})}loadPlans(){this.apiService.getPlansSearch({}).subscribe(n=>{this.planList=n.data})}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(a.qu),e.\u0275\u0275directiveInject(v.F0),e.\u0275\u0275directiveInject(C.s),e.\u0275\u0275directiveInject(S.T),e.\u0275\u0275directiveInject(M.dD),e.\u0275\u0275directiveInject(T.Sf),e.\u0275\u0275directiveInject(I.Z),e.\u0275\u0275directiveInject(A.w))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-tools-user-add-modal"]],decls:59,vars:23,consts:[["nz-form","","nzLayout","vertical",1,"login-form","container-form-mobile",3,"formGroup"],[3,"nzSm","nzXs"],["nzRequired","","nzFor","userName"],["nzErrorTip","Campo obligatorio."],["type","text","nz-input","","formControlName","userName"],["nzRequired","","nzFor","email"],[3,"nzErrorTip"],["type","text","nz-input","","placeholder","","formControlName","email"],["errorEmail",""],["nzRequired","","nzFor","dni"],["type","text","nz-input","","placeholder","","formControlName","dni","maxlength","8"],["errordni",""],["nzRequired","","nzFor","password"],["type","text","nz-input","","formControlName","password"],["errorPassword",""],["nzRequired","","nzFor","sponsor"],["nzErrorTip","Este campo es requerido",3,"nzSpan"],[3,"nzSuffix"],["nz-input","","formControlName","sponsor","placeholder","","appDelayedInput","",1,"text-uppercase",3,"delayedInput"],["suffixIconFileNew",""],["nzRequired","","nzFor","plan"],["formControlName","plan",1,"input__h-50","bg--input"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"pt-4"],[1,"d-flex","align-items-center","justify-content-between"],["nz-button","",1,"login-form-button","w-100","bg-gray-2","border-0",3,"nzType","nzLoading","click"],[4,"ngIf"],["nz-icon","","nzType","loading","nzTheme","outline",4,"ngIf"],["alt","","class","rounded-circle img-fluid","style","max-width: 30px; height: 30px;",3,"src",4,"ngIf"],["nz-icon","","nzType","loading","nzTheme","outline"],["alt","",1,"rounded-circle","img-fluid",2,"max-width","30px","height","30px",3,"src"],[3,"nzValue","nzLabel"]],template:function(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"form",0)(1,"nz-row")(2,"nz-col",1)(3,"nz-form-item")(4,"nz-form-label",2),e.\u0275\u0275text(5,"Nombre"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"nz-form-control",3),e.\u0275\u0275element(7,"input",4),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(8,"nz-row")(9,"nz-col",1)(10,"nz-form-item")(11,"nz-form-label",5),e.\u0275\u0275text(12,"Correo Electr\xf3nico"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"nz-form-control",6),e.\u0275\u0275element(14,"input",7),e.\u0275\u0275template(15,L,2,2,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(17,"nz-row")(18,"nz-col",1)(19,"nz-form-item")(20,"nz-form-label",9),e.\u0275\u0275text(21,"DNI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"nz-form-control",6),e.\u0275\u0275element(23,"input",10),e.\u0275\u0275template(24,K,1,1,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(26,"nz-row")(27,"nz-col",1)(28,"nz-form-item")(29,"nz-form-label",12),e.\u0275\u0275text(30,"Contrase\xf1a"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"nz-form-control",6),e.\u0275\u0275element(32,"input",13),e.\u0275\u0275template(33,W,2,2,"ng-template",null,14,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(35,"nz-row")(36,"nz-col",1)(37,"nz-form-item")(38,"nz-form-label",15),e.\u0275\u0275text(39,"ID de patrocinador"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"nz-form-control",16)(41,"nz-input-group",17)(42,"input",18),e.\u0275\u0275listener("delayedInput",function(){return l.onSearchSponsor()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(43,j,2,2,"ng-template",null,19,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(45,"nz-row")(46,"nz-col",1)(47,"nz-form-item")(48,"nz-form-label",20),e.\u0275\u0275text(49,"Plan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"nz-form-control",3)(51,"nz-select",21),e.\u0275\u0275template(52,X,1,2,"nz-option",22),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(53,"nz-row",23)(54,"nz-col",1)(55,"nz-form-control")(56,"div",24)(57,"button",25),e.\u0275\u0275listener("click",function(){return l.onSubmit()}),e.\u0275\u0275text(58," Crear cuenta "),e.\u0275\u0275elementEnd()()()()()()),2&n){const i=e.\u0275\u0275reference(16),d=e.\u0275\u0275reference(25),p=e.\u0275\u0275reference(34),_=e.\u0275\u0275reference(44);e.\u0275\u0275property("formGroup",l.frmRegister),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzSm",24)("nzXs",24),e.\u0275\u0275advance(7),e.\u0275\u0275property("nzSm",24)("nzXs",24),e.\u0275\u0275advance(4),e.\u0275\u0275property("nzErrorTip",i),e.\u0275\u0275advance(5),e.\u0275\u0275property("nzSm",24)("nzXs",24),e.\u0275\u0275advance(4),e.\u0275\u0275property("nzErrorTip",d),e.\u0275\u0275advance(5),e.\u0275\u0275property("nzSm",24)("nzXs",24),e.\u0275\u0275advance(4),e.\u0275\u0275property("nzErrorTip",p),e.\u0275\u0275advance(5),e.\u0275\u0275property("nzSm",24)("nzXs",24),e.\u0275\u0275advance(4),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzSuffix",_),e.\u0275\u0275advance(5),e.\u0275\u0275property("nzSm",24)("nzXs",24),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",l.planList),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzSm",24)("nzXs",24),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzType","primary")("nzLoading",l.loadingSubmit)}},dependencies:[u.sg,u.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,D.ix,O.w,P.dQ,f.t3,f.SK,s.Lr,s.Nx,s.iK,s.Fd,U.Ls,m.Zp,m.gB,m.ke,g.Ip,g.Vq,x.M],styles:["@media (max-width: 768px){.ant-modal-body[_ngcontent-%COMP%]{padding:1.5rem 0}}"]}),t})()}}]);