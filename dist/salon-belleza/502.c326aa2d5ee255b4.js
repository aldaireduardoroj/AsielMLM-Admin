"use strict";(self.webpackChunksalon_belleza=self.webpackChunksalon_belleza||[]).push([[502],{3502:(Ae,k,s)=>{s.r(k),s.d(k,{ToolsModule:()=>we});var g=s(6895),e=s(4650),w=s(1971),u=s(3679),y=s(7396);let O=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-tools-page"]],decls:36,vars:2,consts:[[2,"border","0"],[1,"m-b-20"],[1,"m-b-20",3,"nzXs"],[1,"m-b-10",3,"nzXs"],["routerLink","/admin/tools/users",1,"d-flex","align-items-center","rounded","card--shadow","m-b-20","p-t-20","p-b-20","pointer"],[1,"p-20"],["width","36","height","36","viewBox","0 0 36 36","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","36","height","36","rx","6","fill","#F2F2F7"],["d","M17.625 18C20.6629 18 23.125 15.5379 23.125 12.5C23.125 9.46211 20.6629 7 17.625 7C14.5871 7 12.125 9.46211 12.125 12.5C12.125 15.5379 14.5871 18 17.625 18ZM21.475 19.375H20.7574C19.8035 19.8133 18.7422 20.0625 17.625 20.0625C16.5078 20.0625 15.4508 19.8133 14.4926 19.375H13.775C10.5867 19.375 8 21.9617 8 25.15V26.9375C8 28.0762 8.92383 29 10.0625 29H25.1875C26.3262 29 27.25 28.0762 27.25 26.9375V25.15C27.25 21.9617 24.6633 19.375 21.475 19.375Z","fill","#626262"],[1,""],[1,"m-b-0","font-size-18",2,"color","rgba(60, 60, 67, 0.6)"],[1,"m-0","font-size-18",2,"font-weight","400"],["routerLink","/admin/tools/orders",1,"d-flex","align-items-center","rounded","card--shadow","m-b-20","p-t-20","p-b-20","pointer"],["d","M22.4842 17.5013C21.7675 17.5013 21.0932 17.1196 20.7284 16.5089L18.0015 11.9881L15.2788 16.5089C14.9099 17.1239 14.2355 17.5056 13.5188 17.5056C13.328 17.5056 13.1371 17.4801 12.9548 17.425L7.14466 15.7625V23.3114C7.14466 23.9348 7.56875 24.4777 8.17097 24.6261L17.3399 26.9205C17.7725 27.0265 18.2263 27.0265 18.6546 26.9205L27.8321 24.6261C28.4343 24.4734 28.8584 23.9306 28.8584 23.3114V15.7625L23.0483 17.4207C22.8659 17.4759 22.675 17.5013 22.4842 17.5013ZM31.5005 12.743L29.3164 8.38325C29.1849 8.12031 28.9008 7.96764 28.6081 8.00581L18.0015 9.35867L21.8905 15.8092C22.0516 16.0764 22.3739 16.2036 22.675 16.1188L31.0679 13.7226C31.4878 13.5996 31.6913 13.1331 31.5005 12.743ZM6.68663 8.38325L4.50254 12.743C4.30746 13.1331 4.51526 13.5996 4.93088 13.7184L13.3237 16.1145C13.6248 16.1993 13.9472 16.0721 14.1083 15.8049L18.0015 9.35867L7.39063 8.00581C7.09801 7.97188 6.8181 8.12031 6.68663 8.38325Z","fill","#626262"],["routerLink","/admin/tools/cash",1,"d-flex","align-items-center","rounded","card--shadow","m-b-20","p-t-20","p-b-20","pointer"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"nz-card",0)(1,"nz-row",1)(2,"nz-col",2)(3,"h2"),e.\u0275\u0275text(4,"Herramientas para cuenta Administrador."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"nz-col",3)(6,"a",4)(7,"div",5),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(8,"svg",6),e.\u0275\u0275element(9,"rect",7)(10,"path",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(11,"div",9)(12,"p",10),e.\u0275\u0275text(13,"Lista de Usuarios"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"p",11),e.\u0275\u0275text(15,"Ver Usuarios Registrados"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"a",12)(17,"div",5),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(18,"svg",6),e.\u0275\u0275element(19,"rect",7)(20,"path",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(21,"div",9)(22,"p",10),e.\u0275\u0275text(23,"Lista de \xd3rdenes"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"p",11),e.\u0275\u0275text(25,"Ver Pedidos Recibidos"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(26,"a",14)(27,"div",5),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(28,"svg",6),e.\u0275\u0275element(29,"rect",7)(30,"path",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(31,"div",9)(32,"p",10),e.\u0275\u0275text(33,"Flujo de Caja"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"p",11),e.\u0275\u0275text(35,"Ver Resumen de Ingresos"),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzXs",24))},dependencies:[w.bd,u.t3,u.SK,y.yS],styles:[".card--shadow[_ngcontent-%COMP%]{box-shadow:0 3px 5px #0000008c}"]}),o})();var X=s(9300),f=s(2340),B=s(9802),m=s(2619),F=s(567),j=s(7835),C=s(4988),T=s(2587),P=s(7),p=s(4006),U=s(6616),z=s(7044),I=s(1811),v=s(7423),h=s(5635),A=s(8231),S=s(269),G=s(4968),L=s(4855),H=s(3504),K=s(3211),_=s(6704);function Z(o,l){if(1&o&&e.\u0275\u0275element(0,"nz-option",19),2&o){const t=l.$implicit;e.\u0275\u0275property("nzValue",t.id)("nzLabel",t.title)}}function J(o,l){1&o&&e.\u0275\u0275element(0,"i",34)}function Q(o,l){if(1&o&&e.\u0275\u0275element(0,"img",35),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("src",t.avatarUrlNewSponsor,e.\u0275\u0275sanitizeUrl)}}function q(o,l){if(1&o&&(e.\u0275\u0275template(0,J,1,0,"i",32),e.\u0275\u0275template(1,Q,1,1,"img",33)),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.loadingSearch),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isSponsorNew)}}function $(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"p",28),e.\u0275\u0275text(2,"* Activarle 1er plan de Afiliaci\xf3n: Este ser\xe1 su primer paquete comprado y generar\xe1 los puntos y bonos que corresponde."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"nz-form-item")(4,"nz-form-label",13),e.\u0275\u0275text(5,"Escribir ID del nuevo patrocinador del Usuario"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"nz-form-control",14)(7,"nz-input-group",29)(8,"input",30),e.\u0275\u0275listener("delayedInput",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.onSearchSponsor())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,q,2,2,"ng-template",null,31,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=e.\u0275\u0275reference(10);e.\u0275\u0275advance(4),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzSuffix",t)}}let Y=(()=>{class o{constructor(t,n,a,r){this.apiService=t,this.modalService=n,this.nzModalService=a,this.fb=r,this.back=new e.EventEmitter,this.avatarUrl=m.t.IMAGE.FALLBACK,this.planList=[],this.loadingSave=!1,this.isSponsorNew=!1,this.loadingSearch=!1,this.avatarUrlNewSponsor=m.t.IMAGE.FALLBACK,this.isSponsordata=!1,this.validateForm=this.fb.group({fullname:[null,[p.kI.required]],packActive:[null],sponsorNew:[""]})}ngOnInit(){this.loadData(),console.log(this.userModel),null==this.userModel.payment&&(this.isSponsordata=!0)}loadData(){(0,F.D)(this.apiService.getPlansSearch({})).subscribe(([t])=>{this.planList=t.data,this.avatarUrl=this.userModel.file?.path?f.N.hostUrl+"/storage/"+this.userModel.file?.path:m.t.IMAGE.FALLBACK,this.validateForm.patchValue({fullname:this.userModel.name,packActive:this.userModel?.payment?.payment_order?.pack?.id??"0"})})}onSearchSponsor(){this.loadingSearch=!0,this.isSponsorNew=!1,this.apiService.getUsersSearch({code:this.validateForm.get("sponsorNew").value??""}).subscribe(t=>{this.loadingSearch=!1,t.success&&t.data.length>0&&""!=this.validateForm.get("sponsorNew").value&&(this.isSponsorNew=!0,this.avatarUrlNewSponsor=t.data[0]?.file?.path?f.N.hostUrl+"/storage/"+t.data[0]?.file?.path:m.t.IMAGE.FALLBACK)},t=>{this.loadingSearch=!1})}fileChangeEvent(t){this.nzModalService.create({nzContent:H.P,nzTitle:"Imagen para cortar",nzMaskClosable:!1,nzComponentParams:{file:t},nzFooter:null}).afterClose.subscribe(a=>{if(null!=a.file){let r=new FormData;r.set("file",a.file),this.apiService.postAuthenticationAvatar(r).subscribe(i=>{(0,K.C3)({name:i.data.name,photo:i.data?.file?.path??""}),this.avatarUrl=null!=i.data.photo?f.N.hostUrl+"/storage/"+i.data.file.path:m.t.IMAGE.FALLBACK},i=>{this.modalService.error(i?.message??"Error al subir imagen")})}})}onBack(){this.back.emit((new Date).getTime())}onSave(){if(console.log(this.validateForm.get("packActive")?.value),null==this.userModel.payment){if(1==this.validateForm.get("packActive")?.value)return void this.modalService.warning("Para activarle 1er Plan, se debe seleccionar un plan existente.");if(""==this.validateForm.get("sponsorNew")?.value&&(null==this.validateForm.get("packActive")?.value||1==this.validateForm.get("packActive")?.value))return void this.modalService.warning("El codig\xf3 de usuario es requerido");if(0==this.isSponsorNew&&""!=this.validateForm.get("sponsorNew")?.value)return void this.modalService.warning("Se debe seleccionar un codig\xf3 de usuario correcto")}this.loadingSave=!0,this.apiService.postUserModify({userCode:this.userModel.uuid,userFullName:this.validateForm.get("fullname")?.value,packId:this.validateForm.get("packActive")?.value,sponsorNew:this.validateForm.get("sponsorNew")?.value??""}).subscribe(t=>{this.nzModalService.closeAll(),this.modalService.success("\xa1Listo, tu cambio se realiz\xf3 con \xe9xito! "),this.loadingSave=!1},t=>{this.nzModalService.closeAll(),this.modalService.error("\xa1Error, no se pudo hacer el cambio!"),this.loadingSave=!1})}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(C.s),e.\u0275\u0275directiveInject(T.Z),e.\u0275\u0275directiveInject(P.Sf),e.\u0275\u0275directiveInject(p.qu))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-tools-users-update-modal"]],inputs:{userModel:"userModel"},outputs:{back:"back"},decls:41,vars:24,consts:[[1,""],[1,"m-b-10","text-center",3,"nzXs"],[1,"text-center",3,"nzXs"],["for","fileupload",1,"position-relative","m-b-20"],["alt","",1,"rounded-circle","img-fluid",2,"max-width","80px","height","80px",3,"src"],["type","file","name","fileupload","id","fileupload","accept",".png,.jpg,.jpeg",1,"d-none",3,"change"],[1,"position-absolute","top-0","start-0","w-100","h-100","d-flex","justify-content-center","align-items-end","rounded-circle",2,"background-color","rgba(0, 0, 0, 0.1)","padding","6px"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","none"],["d","M17.5 5.00001H14.8333L13.3333 3.33334H8.33333V5.00001H12.5833L14.1667 6.66668H17.5V16.6667H4.16667V9.16668H2.5V16.6667C2.5 17.5833 3.25 18.3333 4.16667 18.3333H17.5C18.4167 18.3333 19.1667 17.5833 19.1667 16.6667V6.66668C19.1667 5.75001 18.4167 5.00001 17.5 5.00001ZM6.66667 11.6667C6.66667 15.375 11.1583 17.2417 13.7833 14.6167C16.4083 11.9917 14.5417 7.50001 10.8333 7.50001C8.53333 7.50001 6.66667 9.36668 6.66667 11.6667ZM10.8333 9.16668C12.2 9.20834 13.2917 10.3 13.3333 11.6667C13.2917 13.0333 12.2 14.125 10.8333 14.1667C9.46667 14.125 8.375 13.0333 8.33333 11.6667C8.375 10.3 9.46667 9.20834 10.8333 9.16668ZM4.16667 5.00001H6.66667V3.33334H4.16667V0.833344H2.5V3.33334H0V5.00001H2.5V7.50001H4.16667","fill","#E3E3E3"],[1,"m-b-20","text-center",3,"nzXs"],[1,"font-size-18"],[1,"text-uppercase"],["nz-form","",1,"m-b-30",3,"nzLayout","formGroup"],[3,"nzSpan"],["nzErrorTip","Este dato es requerido",3,"nzSpan"],["nz-input","","formControlName","fullname","placeholder",""],[1,"m-b-20"],["nzErrorTip","",3,"nzSpan"],["formControlName","packActive","nzPlaceholder","Seleccionar plan"],[3,"nzValue","nzLabel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"",3,"nzXs"],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","arrow-left","nzTheme","outline"],[1,"text-right",3,"nzXs"],["nz-button","",3,"nzType","nzLoading","click"],["nz-icon","","nzType","save","nzTheme","outline"],[2,"color","#606060"],[3,"nzSuffix"],["nz-input","","formControlName","sponsorNew","placeholder","","appDelayedInput","",1,"text-uppercase",3,"delayedInput"],["suffixIconFileNew",""],["nz-icon","","nzType","loading","nzTheme","outline",4,"ngIf"],["alt","","class","rounded-circle img-fluid","style","max-width: 30px; height: 30px;",3,"src",4,"ngIf"],["nz-icon","","nzType","loading","nzTheme","outline"],["alt","",1,"rounded-circle","img-fluid",2,"max-width","30px","height","30px",3,"src"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"nz-row",0)(1,"nz-col",1)(2,"p"),e.\u0275\u0275text(3,"Agregar nueva foto de Perfil"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"nz-col",2)(5,"label",3),e.\u0275\u0275element(6,"img",4),e.\u0275\u0275elementStart(7,"input",5),e.\u0275\u0275listener("change",function(r){return n.fileChangeEvent(r)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",6),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(9,"svg",7),e.\u0275\u0275element(10,"path",8),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(11,"nz-col",9)(12,"p",10),e.\u0275\u0275text(13,"ID: "),e.\u0275\u0275elementStart(14,"span",11),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"date"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"form",12)(19,"nz-form-item")(20,"nz-form-label",13),e.\u0275\u0275text(21,"Nombres y Apellidos de Registro"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"nz-form-control",14),e.\u0275\u0275element(23,"input",15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"nz-form-item",16)(25,"nz-form-label",13),e.\u0275\u0275text(26,"Activarle nuevo plan de Afiliaci\xf3n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"nz-form-control",17)(28,"nz-select",18),e.\u0275\u0275element(29,"nz-option",19),e.\u0275\u0275template(30,Z,1,2,"nz-option",20),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(31,$,11,3,"ng-container",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"nz-row",16)(33,"nz-col",22)(34,"button",23),e.\u0275\u0275listener("click",function(){return n.onBack()}),e.\u0275\u0275element(35,"i",24),e.\u0275\u0275text(36," Retroceder"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"nz-col",25)(38,"button",26),e.\u0275\u0275listener("click",function(){return n.onSave()}),e.\u0275\u0275element(39,"i",27),e.\u0275\u0275text(40," Modificar"),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("src",n.avatarUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(5),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(n.userModel.uuid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" / Fecha: ",e.\u0275\u0275pipeBind2(17,21,n.userModel.created_at,"dd/MM/yyyy"),""),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzLayout","vertical")("formGroup",n.validateForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzValue",1)("nzLabel","Sin Plan"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.planList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isSponsordata),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzXs",12),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzType","default"),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzXs",12),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzType","primary")("nzLoading",n.loadingSave))},dependencies:[g.sg,g.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,U.ix,z.w,I.dQ,u.t3,u.SK,_.Lr,_.Nx,_.iK,_.Fd,v.Ls,h.Zp,h.gB,h.ke,A.Ip,A.Vq,L.M,g.uU]}),o})();var W=s(2411);function ee(o,l){if(1&o&&e.\u0275\u0275element(0,"img",25),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("src",t.avatarUrlSponsor,e.\u0275\u0275sanitizeUrl)}}function te(o,l){1&o&&e.\u0275\u0275element(0,"i",28)}function ne(o,l){if(1&o&&e.\u0275\u0275element(0,"img",25),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",t.avatarUrlNewSponsor,e.\u0275\u0275sanitizeUrl)}}function oe(o,l){if(1&o&&(e.\u0275\u0275template(0,te,1,0,"i",26),e.\u0275\u0275template(1,ne,1,1,"img",27)),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.loadingSearch),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isSponsorNew)}}let ae=(()=>{class o{constructor(t,n,a,r,i){this.fb=t,this.apiService=n,this.modalMessage=a,this.modalRef=r,this.formValidator=i,this.back=new e.EventEmitter,this.avatarUrl=m.t.IMAGE.FALLBACK,this.avatarUrlSponsor=m.t.IMAGE.FALLBACK,this.avatarUrlNewSponsor=m.t.IMAGE.FALLBACK,this.loadingSave=!1,this.isSponsorNew=!1,this.loadingSearch=!1,this.validateForm=this.fb.group({sponsor:[{value:null,disabled:!0},[]],sponsorNew:[null,[p.kI.required]],sponsorEmailNew:[null,[p.kI.required,p.kI.email]]})}ngOnInit(){this.avatarUrl=this.userModel.file?.path?f.N.hostUrl+"/storage/"+this.userModel.file?.path:m.t.IMAGE.FALLBACK,this.validateForm.get("sponsor").setValue(this.userModel?.payment?.payment_order?.sponsor_code),this.avatarUrlSponsor=this.userModel.payment?.payment_order?.sponsor?.file?.path?f.N.hostUrl+"/storage/"+this.userModel.payment?.payment_order?.sponsor?.file?.path:m.t.IMAGE.FALLBACK}onSearchSponsor(){this.loadingSearch=!0,this.isSponsorNew=!1,this.apiService.getUsersSearch({code:this.validateForm.get("sponsorNew").value??""}).subscribe(t=>{this.loadingSearch=!1,this.newSponsor=null,t.success&&t.data.length>0&&(this.isSponsorNew=!0,this.newSponsor=t.data[0],this.avatarUrlNewSponsor=t.data[0]?.file?.path?f.N.hostUrl+"/storage/"+t.data[0]?.file?.path:m.t.IMAGE.FALLBACK)},t=>{this.loadingSearch=!1})}onBack(){this.back.emit((new Date).getTime())}onSave(){if(this.formValidator.validForm(this.validateForm)){if(this.newSponsor.email!=this.validateForm.get("sponsorEmailNew").value)return void this.modalMessage.info("Este correo no le corresponde al nuevo patrocinador.");this.modalMessage.confirm("\xbfEsta seguro de cambiar este nuevo patrocinador?",()=>{this.loadingSave=!0,this.apiService.postUsercodeChangeSponsor({userCode:this.userModel?.uuid,sponsorCode:this.validateForm.get("sponsorNew").value}).subscribe(t=>{this.loadingSave=!1,this.modalRef.closeAll()},t=>{this.modalRef.closeAll(),this.loadingSave=!1})})}}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(p.qu),e.\u0275\u0275directiveInject(C.s),e.\u0275\u0275directiveInject(T.Z),e.\u0275\u0275directiveInject(P.Sf),e.\u0275\u0275directiveInject(W.T))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-tools-users-sponsor-modal"]],inputs:{userModel:"userModel"},outputs:{back:"back"},decls:44,vars:26,consts:[[1,""],[1,"m-b-10","text-center",3,"nzXs"],[1,"font-size-18",2,"color","#4379EE"],[1,"m-b-20","text-center",3,"nzXs"],["for","fileupload",1,"position-relative","m-b-20"],["alt","",1,"rounded-circle","img-fluid",2,"max-width","80px","height","80px",3,"src"],[1,"font-size-18"],[1,"text-uppercase"],[3,"nzXs"],["nz-form","",1,"m-b-30",3,"nzLayout","formGroup"],[1,"m-b-30"],[3,"nzSpan"],["nzErrorTip","",3,"nzSpan"],[3,"nzSuffix"],["nz-input","","formControlName","sponsor","placeholder","",1,"text-uppercase"],["suffixIconFile",""],["nzErrorTip","Este campo es requerido",3,"nzSpan"],["nz-input","","formControlName","sponsorNew","placeholder","","appDelayedInput","",1,"text-uppercase",3,"delayedInput"],["suffixIconFileNew",""],["nz-input","","formControlName","sponsorEmailNew","placeholder","",1,"text-uppercase"],[1,"m-b-20"],[1,"",3,"nzXs"],["nz-button","",3,"nzType","click"],[1,"text-right",3,"nzXs"],["nz-button","",3,"nzType","nzLoading","click"],["alt","",1,"rounded-circle","img-fluid",2,"max-width","30px","height","30px",3,"src"],["nz-icon","","nzType","loading","nzTheme","outline",4,"ngIf"],["alt","","class","rounded-circle img-fluid","style","max-width: 30px; height: 30px;",3,"src",4,"ngIf"],["nz-icon","","nzType","loading","nzTheme","outline"]],template:function(t,n){if(1&t&&(e.\u0275\u0275elementStart(0,"nz-row",0)(1,"nz-col",1)(2,"p",2),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"nz-col",3)(5,"label",4),e.\u0275\u0275element(6,"img",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"nz-col",3)(8,"p",6),e.\u0275\u0275text(9,"ID: "),e.\u0275\u0275elementStart(10,"span",7),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"nz-col",8)(15,"form",9)(16,"nz-form-item",10)(17,"nz-form-label",11),e.\u0275\u0275text(18,"ID del Patrocinador Actual del Usuario"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"nz-form-control",12)(20,"nz-input-group",13),e.\u0275\u0275element(21,"input",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,ee,1,1,"ng-template",null,15,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"nz-form-item")(25,"nz-form-label",11),e.\u0275\u0275text(26,"Escribir ID del nuevo patrocinador del Usuario"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"nz-form-control",16)(28,"nz-input-group",13)(29,"input",17),e.\u0275\u0275listener("delayedInput",function(){return n.onSearchSponsor()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(30,oe,2,2,"ng-template",null,18,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"nz-form-item")(33,"nz-form-label",11),e.\u0275\u0275text(34,"Escribir Email del nuevo patrocinador del Usuario"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"nz-form-control",16),e.\u0275\u0275element(36,"input",19),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(37,"nz-row",20)(38,"nz-col",21)(39,"button",22),e.\u0275\u0275listener("click",function(){return n.onBack()}),e.\u0275\u0275text(40,"Retroceder"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"nz-col",23)(42,"button",24),e.\u0275\u0275listener("click",function(){return n.onSave()}),e.\u0275\u0275text(43,"Modificar"),e.\u0275\u0275elementEnd()()()),2&t){const a=e.\u0275\u0275reference(23),r=e.\u0275\u0275reference(31);e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.userModel.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("src",n.avatarUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(n.userModel.uuid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" / Fecha: ",e.\u0275\u0275pipeBind2(13,23,n.userModel.created_at,"dd/MM/yyyy"),""),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzLayout","vertical")("formGroup",n.validateForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzSuffix",a),e.\u0275\u0275advance(5),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzSuffix",r),e.\u0275\u0275advance(5),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzSpan",24),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzXs",12),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzType","default"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzXs",12),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzType","primary")("nzLoading",n.loadingSave)}},dependencies:[g.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,U.ix,z.w,I.dQ,u.t3,u.SK,_.Lr,_.Nx,_.iK,_.Fd,v.Ls,h.Zp,h.gB,h.ke,L.M,g.uU]}),o})(),re=(()=>{class o{constructor(t,n,a){this.apiService=t,this.modalRef=n,this.modalMessage=a,this.back=new e.EventEmitter,this.avatarUrl=m.t.IMAGE.FALLBACK,this.loadingSave=!1}ngOnInit(){this.avatarUrl=this.userModel.file?.path?f.N.hostUrl+"/storage/"+this.userModel.file?.path:m.t.IMAGE.FALLBACK}onBack(){this.back.emit((new Date).getTime())}onSave(){this.modalMessage.confirm("\xbfEsta seguro de resetear etse usuario?",()=>{this.loadingSave=!0,this.apiService.postUsercodeResetPoint({userCode:this.userModel?.uuid}).subscribe(t=>{this.loadingSave=!1,this.modalRef.closeAll()},t=>{this.loadingSave=!1,this.modalRef.closeAll()})})}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(C.s),e.\u0275\u0275directiveInject(P.Sf),e.\u0275\u0275directiveInject(T.Z))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-tools-users-reset-modal"]],inputs:{userModel:"userModel"},outputs:{back:"back"},decls:26,vars:14,consts:[[1,"m-b-40"],[1,"m-b-10","text-center",3,"nzXs"],[1,"font-size-18",2,"color","#4379EE"],[1,"m-b-20","text-center",3,"nzXs"],["for","fileupload",1,"position-relative","m-b-20"],["alt","",1,"rounded-circle","img-fluid",2,"max-width","80px","height","80px",3,"src"],[1,"font-size-18"],[1,"text-uppercase"],[1,"text-center",3,"nzXs"],[1,"font-size-15",2,"color","#606060"],[1,"m-b-20","justify-content-between"],["nz-button","",3,"nzType","click"],["nz-icon","","nzType","arrow-left","nzTheme","outline"],["nz-button","",3,"nzType","nzLoading","click"],["nz-icon","","nzType","right","nzTheme","outline"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"nz-row",0)(1,"nz-col",1)(2,"p",2),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"nz-col",3)(5,"label",4),e.\u0275\u0275element(6,"img",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"nz-col",1)(8,"p",6),e.\u0275\u0275text(9,"ID: "),e.\u0275\u0275elementStart(10,"span",7),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"nz-col",8)(15,"p",9),e.\u0275\u0275text(16,"Esta funci\xf3n Resetear al usuario, mantendr\xe1 su usuario, correo y contrase\xf1a. Pero tendr\xe1 que comprar paquete y se\xf1alar su patrocinador como si fuera su 1ra compra."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"p",9),e.\u0275\u0275text(18,"Para Resetear a un usuario este no debe tener usuarios invitados debajo de \xe9l. (Requisito). Se recomienda resetear al usuario, los primeros d\xedas de cada mes. cuando no tenga puntos o bonos."),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"nz-row",10)(20,"button",11),e.\u0275\u0275listener("click",function(){return n.onBack()}),e.\u0275\u0275element(21,"i",12),e.\u0275\u0275text(22," Retroceder"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"button",13),e.\u0275\u0275listener("click",function(){return n.onSave()}),e.\u0275\u0275text(24,"Resetear Usuario, proceder "),e.\u0275\u0275element(25,"i",14),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.userModel.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("src",n.avatarUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(n.userModel.uuid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" / Fecha: ",e.\u0275\u0275pipeBind2(13,11,n.userModel.created_at,"dd/MM/yyyy"),""),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(6),e.\u0275\u0275property("nzType","default"),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzType","primary")("nzLoading",n.loadingSave))},dependencies:[U.ix,z.w,I.dQ,u.t3,u.SK,v.Ls,g.uU]}),o})();var D=s(9054),N=s(6152);function le(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"nz-list-item")(1,"nz-col",18)(2,"p",19)(3,"b"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(5," - "),e.\u0275\u0275elementStart(6,"span",20)(7,"b"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"nz-col",3)(10,"div",21)(11,"i",22),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(t).index,i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onAddQuantity(r,-1))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"span",23),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"i",24),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(t).index,i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onAddQuantity(r,1))}),e.\u0275\u0275elementEnd()()()()}if(2&o){const t=l.$implicit;let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",18),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.title),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",t.points," Ptos"),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",6),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(null!==(n=null==t?null:t.quantity)&&void 0!==n?n:0)}}function ie(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",25)(1,"div")(2,"p",19),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",27)(5,"p",19)(6,"b"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()()()),2&o){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate2("",t.title," (",t.quantity,")"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("S/.",t.price*t.quantity,"")}}function se(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ie,8,3,"div",28),e.\u0275\u0275elementContainerEnd()),2&o){const t=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.quantity>0)}}function pe(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,se,2,1,"ng-container",14),e.\u0275\u0275elementStart(2,"div")(3,"div",25)(4,"div")(5,"p",26),e.\u0275\u0275text(6,"Puntos ganados por compras :"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",27)(8,"p",26),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t._cartList),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(t.totalPoints)}}let de=(()=>{class o{constructor(t,n,a){this.apiService=t,this.modalRef=n,this.modalService=a,this.back=new e.EventEmitter,this.avatarUrl=m.t.IMAGE.FALLBACK,this.loadingSave=!1,this.productsList=[],this._cartList=[],this.loadingDesactive=!1,this.maxPointsProduct=0}ngOnInit(){this.loadData()}loadData(){(0,F.D)(this.apiService.getProductSearch({}),this.apiService.getProductPaymnetPoints(),this.apiService.getProductPointSearch({}),this.apiService.getOptionsSearch({key:"max_points_product"})).subscribe(([t,n,a,r])=>{t.success&&(this.productsList=t.data.map(i=>(i.points=null==this.userModel?.payment?.payment_order?0:a.data.find(c=>c.pack_id==this.userModel?.payment?.payment_order.pack.id&&c.product_id==i.id)?.point??0,i))),r.success&&(this.maxPointsProduct=r.data[0].option_value)})}onAddQuantity(t,n){(this.productsList[t].quantity??0)>=0&&(this.productsList[t].quantity=(this.productsList[t].quantity??0)+n),this.productsList[t].quantity=-1==this.productsList[t].quantity?0:this.productsList[t].quantity,this._cartList=this.productsList.filter(a=>a.quantity>0)}get totalPoints(){return 0==this._cartList.length?0:this._cartList.map(t=>t.points*t.quantity).reduce((t,n)=>t+n)}modalDesactive(){this.modalService.confirm("\xbfDesea activar este usuario?",()=>{this.loadingDesactive=!0,this.apiService.postUsercodeActiveResidual({userCode:this.userModel?.uuid,products:this._cartList.map(t=>({product:t.id,quantity:t.quantity??0}))}).subscribe(t=>{this.modalRef.closeAll(),this.loadingDesactive=!1},t=>{this.loadingDesactive=!1})})}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(C.s),e.\u0275\u0275directiveInject(P.Sf),e.\u0275\u0275directiveInject(T.Z))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-tools-users-reactive-modal"]],inputs:{userModel:"userModel"},outputs:{back:"back"},decls:29,vars:19,consts:[[1,"m-b-40"],[1,"m-b-10","text-center",3,"nzXs"],[1,"font-size-18",2,"color","#4379EE"],[1,"text-center",3,"nzXs"],["for","fileupload",1,"position-relative","m-b-20"],["alt","",1,"rounded-circle","img-fluid",2,"max-width","80px","height","80px",3,"src"],[1,"font-size-18"],[1,"text-uppercase"],[1,"text-center","m-b-30",3,"nzXs"],[1,"font-size-15",2,"color","#606060"],[1,"m-b-10",3,"nzXs"],[1,"out--content",3,"nzExpandIconPosition"],[3,"nzHeader"],["nzBordered","","nzSize","small"],[4,"ngFor","ngForOf"],[1,"m-b-20",3,"nzXs"],[4,"ngIf"],["nz-button","","nzType","primary",1,"ant-btn-success",3,"nzLoading","click"],[1,"",3,"nzXs"],[1,"m-0"],[2,"color","#A6A6A6"],[1,"text-black","d-flex","align-items-center","p-10",2,"background-color","#F0F0F0","border-radius","20px"],["nz-icon","","nzType","minus","nzTheme","outline",1,"p-r-10","p-l-10","pointer",3,"click"],[1,"notranslate"],["nz-icon","","nzType","plus","nzTheme","outline",1,"p-r-10","p-l-10","pointer",3,"click"],[1,"d-flex","justify-content-between"],[1,"m-0",2,"color","#505050"],[1,"text-right"],["class","d-flex justify-content-between",4,"ngIf"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"nz-row",0)(1,"nz-col",1)(2,"p",2),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"nz-col",3)(5,"label",4),e.\u0275\u0275element(6,"img",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"nz-col",1)(8,"p",6),e.\u0275\u0275text(9,"ID: "),e.\u0275\u0275elementStart(10,"span",7),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"nz-col",8)(15,"p",9),e.\u0275\u0275text(16,"Para Reactivar a este usuario y generar Puntos residual, es necesario que indiques los productos que comprar\xe1 por valor x\u2265200 Puntos. La reactivaci\xf3n se har\xe1 simulando una compra."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"nz-col",10)(18,"nz-collapse",11)(19,"nz-collapse-panel",12)(20,"nz-list",13),e.\u0275\u0275template(21,le,15,5,"nz-list-item",14),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(22,"nz-col",15)(23,"p"),e.\u0275\u0275text(24,"DETALLE DE COMPRA"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,pe,10,2,"ng-container",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"nz-col",15)(27,"button",17),e.\u0275\u0275listener("click",function(){return n.modalDesactive()}),e.\u0275\u0275text(28,"Reactivar, simulando compra en tienda"),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.userModel.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("src",n.avatarUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(n.userModel.uuid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" / Fecha: ",e.\u0275\u0275pipeBind2(13,16,n.userModel.created_at,"dd/MM/yyyy"),""),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzExpandIconPosition","right"),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzHeader","Click aqu\xed para ver listado de productos y seleccionar"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.productsList),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n._cartList.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzLoading",n.loadingDesactive))},dependencies:[g.sg,g.O5,U.ix,z.w,I.dQ,D.Zv,D.yH,u.t3,u.SK,v.Ls,N.n_,N.AA,g.uU]}),o})();function ce(o,l){1&o&&e.\u0275\u0275element(0,"i",22)}function me(o,l){1&o&&e.\u0275\u0275element(0,"i",22)}function ue(o,l){if(1&o&&e.\u0275\u0275element(0,"nz-option",23),2&o){const t=l.$implicit;e.\u0275\u0275property("nzValue",t.id)("nzLabel",t.title)}}function ge(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td",24),e.\u0275\u0275element(2,"img",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",24),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td",24)(6,"span",26),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"td",24),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td",24),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td",24)(13,"b"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"td",24),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td",24),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td",24),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td",24),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"td",24),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"td",24),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"td",24)(28,"nz-tag",27),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(t).$implicit,i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onSeletedUSer(r.uuid,r))}),e.\u0275\u0275text(29,"VER"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"td",24)(31,"button",28),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(t).$implicit,i=e.\u0275\u0275nextContext(),c=e.\u0275\u0275reference(62);return e.\u0275\u0275resetView(i.onDetailUser(r,c))}),e.\u0275\u0275element(32,"i",29),e.\u0275\u0275elementEnd()()()}if(2&o){const t=l.$implicit,n=e.\u0275\u0275nextContext();let a,r,i,c,b,E,M;e.\u0275\u0275advance(2),e.\u0275\u0275property("src",null!=t.file?n.environment.hostUrl+"/storage/"+t.file.path:n.CONSTANTS.IMAGE.FALLBACK,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.uuid),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null!==(a=null==t||null==t.payment||null==t.payment.payment_order||null==t.payment.payment_order.pack?null:t.payment.payment_order.pack.title)&&void 0!==a?a:"Sin Plan"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==(null==t||null==t.payment?null:t.payment.state)?"--":(null==t||null==t.payment?null:t.payment.state)==n.CONSTANTS.PAYMENT_ORDER.PAGADO?"Activo":"Inactivo"," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==(null==t?null:t.range)?"Sin Rango":null==t?null:t.range.range.title),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(r=null==t||null==t.points?null:t.points.patrocinio)&&void 0!==r?r:0),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((null!==(i=null==t||null==t.points?null:t.points.residual)&&void 0!==i?i:0)+(null!==(i=null==t||null==t.points?null:t.points.pointAfiliado)&&void 0!==i?i:0)+(null!==(i=null==t||null==t.points?null:t.points.personalGlobal)&&void 0!==i?i:0)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((null!==(c=null==t||null==t.points?null:t.points.compra)&&void 0!==c?c:0)+(null!==(c=null==t||null==t.points?null:t.points.personal)&&void 0!==c?c:0)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(b=null==t||null==t.points?null:t.points.pointGroup)&&void 0!==b?b:0),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(E=null==t||null==t.points?null:t.points.infinito)&&void 0!==E?E:0),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(M=null==t?null:t.totalPoints)&&void 0!==M?M:0),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzColor","#87d068"),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzSize","small")}}function he(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.modalUserOptions(4))}),e.\u0275\u0275text(2,"Activar Usuarios con Plan : Genera residual"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}}function fe(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.onPaymentOfflineConfirm(a.userModel.uuid))}),e.\u0275\u0275text(2,"Activar Usuario: Pago Efectivo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}}function _e(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nz-row",33)(2,"nz-col",36)(3,"button",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.modalUserOptions(1))}),e.\u0275\u0275text(4,"Modificar Datos de usuario"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",38),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.modalUserOptions(2))}),e.\u0275\u0275text(6,"Modificar Patrocinador de usuario"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"button",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.modalUserOptions(3))}),e.\u0275\u0275text(8,"Eliminar a usuario registrado"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,he,3,0,"ng-container",32),e.\u0275\u0275template(10,fe,3,0,"ng-container",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",(null==t.userModel.payment?null:t.userModel.payment.state)==t.CONSTANTS.PAYMENT_ORDER.TERMINADO),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t.userModel.payment?null:t.userModel.payment.state)==t.CONSTANTS.PAYMENT_ORDER.PREORDER)}}function ze(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"app-tools-users-update-modal",42),e.\u0275\u0275listener("back",function(a){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.onBack(a))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("userModel",t.userModel)}}function ve(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"app-tools-users-sponsor-modal",42),e.\u0275\u0275listener("back",function(a){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.onBack(a))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("userModel",t.userModel)}}function Se(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"app-tools-users-reset-modal",42),e.\u0275\u0275listener("back",function(a){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.onBack(a))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("userModel",t.userModel)}}function xe(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"app-tools-users-reactive-modal",42),e.\u0275\u0275listener("back",function(a){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.onBack(a))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("userModel",t.userModel)}}function ye(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",30)(1,"h2",31),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(3,_e,11,3,"ng-container",32),e.\u0275\u0275template(4,ze,2,1,"ng-container",32),e.\u0275\u0275template(5,ve,2,1,"ng-container",32),e.\u0275\u0275template(6,Se,2,1,"ng-container",32),e.\u0275\u0275template(7,xe,2,1,"ng-container",32),e.\u0275\u0275elementStart(8,"nz-row",33)(9,"nz-col",2)(10,"button",34),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.onClose())}),e.\u0275\u0275element(11,"i",35),e.\u0275\u0275text(12," Cancelar"),e.\u0275\u0275elementEnd()()()}if(2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.tabTitle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==t.tabModal),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1==t.tabModal),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",2==t.tabModal),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",3==t.tabModal),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",4==t.tabModal),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzXs",12),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzType","primary")}}const Ce=function(){return{x:"1240px"}},V="Selecciona qu\xe9 deseas modificar";let Te=(()=>{class o{constructor(t,n,a,r){this.apiService=t,this.modalService=n,this.nzModalService=a,this.fb=r,this.pageIndex=m.t.PAGINATION.PAGE_INDEX,this.pageSize=m.t.PAGINATION.PAGE_SIZE,this.sortProperty="",this.sortPropertyName="",this.totalRecord=0,this.tableProductLoading=!1,this.tableProducts=[],this.CONSTANTS=m.t,this.environment=f.N,this.codeUser="",this.nameUser="",this.initLoad=!0,this._listPoints=[],this.tabModal=0,this.tabTitle=V,this.planSelected=null,this.planList=[],this.loadingDesactive=!1}ngOnInit(){this.loadData()}onSearch(){this.tableProductLoading=!0,this.apiService.getUsersFindAll({code:this.codeUser.trim(),name:this.nameUser.trim(),plan:this.planSelected??"",limit:this.pageSize,page:this.pageIndex}).subscribe(t=>{t.success&&(this.totalRecord=t.data.pagination.total,this.tableProducts=t.data.items),this.tableProductLoading=!1},t=>{this.modalService.error(t.message??""),this.tableProductLoading=!1})}loadData(){this.tableProductLoading=!0,(0,F.D)(this.apiService.getPointList({}),this.apiService.getUsersFindAll({code:this.codeUser.trim(),name:this.nameUser.trim(),plan:this.planSelected??"",limit:this.pageSize,page:this.pageIndex}),this.apiService.getPlansSearch({})).subscribe(([t,n,a])=>{this._listPoints=t.data,n.success&&(this.totalRecord=n.data.pagination.total,this.tableProducts=n.data.items),this.tableProductLoading=!1,this.planList=a.data,this.initLoad=!1})}onQueryParamsChange(t){const{pageSize:n,pageIndex:a,sort:r,filter:i}=t;let c;this.pageIndex=a,this.pageSize=n,null!==r[0]?.value&&("ascend"==r[0]?.value&&(c="ASC"),"descend"==r[0]?.value&&(c="DESC"),"name"===r[0]?.key&&(this.sortProperty="name "+c)),console.log(n,a,r,i),this.initLoad||this.onSearch()}onSeletedUSer(t,n){"-1"!=t&&this.nzModalService.create({nzTitle:"Detalle",nzContent:B.Z,nzFooter:null,nzComponentParams:{userModel:n,listPoints:this._listPoints,paymentOrder:n?.payment,pointTotal:n?.points?.pointGroup??0}})}listPoints(){this.tableProductLoading=!0,this.apiService.getPointList({}).subscribe(t=>{this._listPoints=t.data,this.onSearch()},t=>{})}calculatePoints(t){let a=0,r=0,i=0,c=0,b=this._listPoints.filter(d=>d.sponsor_code?.toLowerCase()==t.toLowerCase()&&"P"==d.type);a=b.length>0?b.map(d=>d.point).reduce((d,x)=>d+x):0;let E=this._listPoints.filter(d=>d.sponsor_code?.toLowerCase()==t.toLowerCase()&&"R"==d.type);r=E.length>0?E.map(d=>d.point).reduce((d,x)=>d+x):0;let M=this._listPoints.filter(d=>d.user_code?.toLowerCase()==t.toLowerCase()&&"B"==d.type);i=M.length>0?M.map(d=>d.point).reduce((d,x)=>d+x):0;let R=this._listPoints.filter(d=>d.sponsor_code?.toLowerCase()==t.toLowerCase()&&"G"==d.type);return c=R.length>0?R.map(d=>d.point).reduce((d,x)=>d+x):0,a+r+i+c}onDetailUser(t,n){const a=this.nzModalService.create({nzTitle:null,nzContent:n,nzFooter:null,nzMaskClosable:!1,nzClosable:!1,nzWidth:"450px",nzComponentParams:{}});this.userModel=t,a.afterClose.subscribe(()=>this.onSearch())}modalDesactive(){this.modalService.confirm("\xbfDesea activar este usuario?",()=>{this.loadingDesactive=!0,this.apiService.postUsercodeActiveResidual({userCode:this.userModel?.uuid}).subscribe(t=>{this.onSearch(),this.nzModalService.closeAll(),this.loadingDesactive=!1},t=>{this.loadingDesactive=!1})})}modalUserOptions(t){if(2!=t||null!=this.userModel?.payment){switch(t){case 1:this.tabTitle="Modificar Datos de Usuario";break;case 2:this.tabTitle="Modificar Patrocinador de Usuario";break;case 4:this.tabTitle="Activar Usuarios con Plan : Genera residual";break;default:this.tabTitle=V}this.tabModal=t}else this.modalService.warning("Este usuario debe de tener un plan comprado, para continuar.")}onClose(){this.modalUserOptions(0),this.nzModalService.closeAll()}onBack(t){this.modalUserOptions(0)}onChangePlan(t){this.onSearch()}onPaymentOfflineConfirm(t){this.modalService.confirm("\xbfDesea activar la invitacion del usuario?",()=>{this.apiService.postPaymentConfirmOffline({sponsorId:t}).subscribe(n=>{this.nzModalService.closeAll(),this.modalService.success("Usuario aceptado")},n=>{this.modalService.error(n?.message??"Error"),this.nzModalService.closeAll()})})}onAddUser(){this.nzModalService.create({nzTitle:"Agregar Usuario",nzContent:j.i,nzFooter:null,nzWidth:"550px",nzComponentParams:{}}).afterClose.subscribe(()=>{this.onSearch()})}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(C.s),e.\u0275\u0275directiveInject(T.Z),e.\u0275\u0275directiveInject(P.Sf),e.\u0275\u0275directiveInject(p.qu))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-tools-users-page"]],decls:63,vars:34,consts:[[2,"border","0"],[1,"m-b-20"],[1,"m-b-20",3,"nzXs"],[1,"d-flex","align-items-center"],["routerLink","/admin/tools",1,"text-black-2"],["nz-icon","","nzType","arrow-left","nzTheme","outline",1,"font-size-26"],[1,"m-0","text-black-2"],[1,"d-flex","align-items-center","card--shadow","p-20","m-rows"],[1,"m-0","p-r-20","m-b-10"],[2,"max-width","300px","background-color","#F8F9FA","border-radius","20px","border","0","margin-right","10px","margin-bottom","10px",3,"nzPrefix"],["type","text","nz-input","","placeholder","Buscar usuario por ID","appDelayedInput","",2,"background-color","#F8F9FA",3,"ngModel","ngModelChange","delayedInput"],["suffixTemplateInfo",""],["type","text","nz-input","","placeholder","Buscar usuario por Nombre","appDelayedInput","",2,"background-color","#F8F9FA",3,"ngModel","ngModelChange","delayedInput"],["suffixTemplateInfoName",""],["nzPlaceHolder","Todos",1,"select--filter","m-b-10",2,"min-width","180px","margin-right","10px",3,"ngModel","nzAllowClear","ngModelChange"],["nzValue","-1","nzLabel","Sin Plan"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",2,"margin-bottom","10px",3,"click"],["nzSize","small",3,"nzFrontPagination","nzLoading","nzData","nzTotal","nzPageIndex","nzPageSize","nzScroll","nzPageIndexChange","nzPageSizeChange","nzQueryParams"],[3,"nzAlign"],[4,"ngFor","ngForOf"],["tplContent",""],["nz-icon","","nzType","search"],[3,"nzValue","nzLabel"],["nzAlign","center"],["alt","",1,"rounded-circle",2,"width","50px",3,"src"],[1,"text-uppercase"],[1,"pointer","m-0",3,"nzColor","click"],["nz-button","","nzShape","circle",3,"nzSize","click"],["nz-icon","","nzType","ellipsis"],[1,"text-center","m-b-30"],[1,"font-size-40",2,"font-weight","700","line-height","1.2"],[4,"ngIf"],[1,""],["nz-button","","nzDanger","",3,"nzType","click"],["nz-icon","","nzType","close","nzTheme","outline"],[1,"m-b-10",3,"nzXs"],["nz-button","","nzType","primary",1,"m-b-20",3,"click"],["nz-button","","nzType","primary",1,"m-b-20","ant-btn-warning",3,"click"],["nz-button","","nzType","primary","nzDanger","",1,"m-b-20",3,"click"],["nz-button","","nzType","primary",1,"m-b-20","ant-btn-success",3,"click"],["nz-button","","nzType","primary",1,"m-b-20","ant-btn-info",3,"click"],[3,"userModel","back"]],template:function(t,n){if(1&t&&(e.\u0275\u0275elementStart(0,"nz-card",0)(1,"nz-row",1)(2,"nz-col",2)(3,"div",3)(4,"a",4),e.\u0275\u0275element(5,"i",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(6,"\xa0\xa0\xa0\xa0 "),e.\u0275\u0275elementStart(7,"h3",6),e.\u0275\u0275text(8,"Usuarios Registrados en tu plataforma MLM"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"nz-col",2)(10,"div",7)(11,"h4",8),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"nz-input-group",9)(14,"input",10),e.\u0275\u0275listener("ngModelChange",function(r){return n.codeUser=r})("delayedInput",function(){return n.onSearch()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(15,ce,1,0,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(17,"nz-input-group",9)(18,"input",12),e.\u0275\u0275listener("ngModelChange",function(r){return n.nameUser=r})("delayedInput",function(){return n.onSearch()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(19,me,1,0,"ng-template",null,13,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(21,"nz-select",14),e.\u0275\u0275listener("ngModelChange",function(r){return n.planSelected=r})("ngModelChange",function(r){return n.onChangePlan(r)}),e.\u0275\u0275element(22,"nz-option",15),e.\u0275\u0275template(23,ue,1,2,"nz-option",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"button",17),e.\u0275\u0275listener("click",function(){return n.onAddUser()}),e.\u0275\u0275text(25,"Agregar Usuario"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(26,"nz-row")(27,"nz-col",2)(28,"nz-table",18),e.\u0275\u0275listener("nzPageIndexChange",function(r){return n.pageIndex=r})("nzPageSizeChange",function(r){return n.pageSize=r})("nzQueryParams",function(r){return n.onQueryParamsChange(r)}),e.\u0275\u0275elementStart(29,"thead")(30,"tr")(31,"th",19),e.\u0275\u0275text(32,"Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"th",19),e.\u0275\u0275text(34,"Nombre y Apellidos"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"th",19),e.\u0275\u0275text(36,"C\xf3digo ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"th",19),e.\u0275\u0275text(38,"Plan Actual"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"th",19),e.\u0275\u0275text(40,"Estado"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"th",19),e.\u0275\u0275text(42,"Rango"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"th",19),e.\u0275\u0275text(44,"Puntos Patrocinio"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"th",19),e.\u0275\u0275text(46,"Puntos Residuales"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"th",19),e.\u0275\u0275text(48,"Puntos por plan Actual"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"th",19),e.\u0275\u0275text(50,"Puntos Grupales"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"th",19),e.\u0275\u0275text(52,"Bono Infinito"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"th",19),e.\u0275\u0275text(54,"Puntos Gran total"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"th",19),e.\u0275\u0275text(56,"Ver"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"th",19),e.\u0275\u0275text(58,"Accion"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(59,"tbody"),e.\u0275\u0275template(60,ge,33,14,"tr",20),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(61,ye,13,8,"ng-template",null,21,e.\u0275\u0275templateRefExtractor)),2&t){const a=e.\u0275\u0275reference(16),r=e.\u0275\u0275reference(20);e.\u0275\u0275advance(2),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(7),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("All (",n.totalRecord,")"),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzPrefix",a),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.codeUser),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzPrefix",r),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.nameUser),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngModel",n.planSelected)("nzAllowClear",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.planList),e.\u0275\u0275advance(4),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzFrontPagination",!1)("nzLoading",n.tableProductLoading)("nzData",n.tableProducts)("nzTotal",n.totalRecord)("nzPageIndex",n.pageIndex)("nzPageSize",n.pageSize)("nzScroll",e.\u0275\u0275pureFunction0(33,Ce)),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzAlign","center"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.tableProducts)}},dependencies:[g.sg,g.O5,p.Fj,p.JJ,p.On,U.ix,z.w,I.dQ,w.bd,u.t3,u.SK,v.Ls,h.Zp,h.gB,h.ke,A.Ip,A.Vq,S.N8,S.Uo,S._C,S.Om,S.p0,S.$Z,S.UX,G.j,L.M,y.yS,Y,ae,re,de],styles:[".card--shadow[_ngcontent-%COMP%]{box-shadow:0 3px 5px #0000008c}@media (max-width: 768px){.m-rows[_ngcontent-%COMP%]{flex-direction:column}}"]}),o})();var be=s(6567);function Ee(o,l){1&o&&e.\u0275\u0275element(0,"i",14)}function Me(o,l){1&o&&e.\u0275\u0275element(0,"i",14)}let Pe=(()=>{class o{constructor(){this.codeUser="",this.nameUser="",this.totalRecord=0,this.eventSearch=0,this.queryParams={}}ngOnInit(){}onSearch(){this.queryParams={codeuser:this.codeUser.trim(),name:this.nameUser.trim()},this.eventSearch=(new Date).getTime()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-tools-order-page"]],decls:21,vars:9,consts:[[2,"border","0"],[1,"m-b-20"],[1,"m-b-20",3,"nzXs"],[1,"d-flex","align-items-center"],["routerLink","/admin/tools",1,"text-black-2"],["nz-icon","","nzType","arrow-left","nzTheme","outline",1,"font-size-26"],[1,"m-0","text-black-2"],[1,"d-flex","align-items-center","card--shadow","p-20"],[2,"max-width","300px","background-color","#F8F9FA","border-radius","20px","border","0","margin-right","10px",3,"nzPrefix"],["type","text","nz-input","","placeholder","Buscar usuario por ID","appDelayedInput","",2,"background-color","#F8F9FA",3,"ngModel","ngModelChange","delayedInput"],["suffixTemplateInfo",""],["type","text","nz-input","","placeholder","Buscar usuario por Nombre","appDelayedInput","",2,"background-color","#F8F9FA",3,"ngModel","ngModelChange","delayedInput"],["suffixTemplateInfoName",""],[3,"searchLoader","queryParams"],["nz-icon","","nzType","search"]],template:function(t,n){if(1&t&&(e.\u0275\u0275elementStart(0,"nz-card",0)(1,"nz-row",1)(2,"nz-col",2)(3,"div",3)(4,"a",4),e.\u0275\u0275element(5,"i",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(6,"\xa0\xa0\xa0\xa0 "),e.\u0275\u0275elementStart(7,"h3",6),e.\u0275\u0275text(8,"Pedidos Registrados en tu plataforma "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"nz-col",2)(10,"div",7)(11,"nz-input-group",8)(12,"input",9),e.\u0275\u0275listener("ngModelChange",function(r){return n.codeUser=r})("delayedInput",function(){return n.onSearch()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(13,Ee,1,0,"ng-template",null,10,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(15,"nz-input-group",8)(16,"input",11),e.\u0275\u0275listener("ngModelChange",function(r){return n.nameUser=r})("delayedInput",function(){return n.onSearch()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(17,Me,1,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"nz-col",2),e.\u0275\u0275element(20,"app-table-payment-product-order",13),e.\u0275\u0275elementEnd()()()),2&t){const a=e.\u0275\u0275reference(14),r=e.\u0275\u0275reference(18);e.\u0275\u0275advance(2),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(7),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("nzPrefix",a),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.codeUser),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzPrefix",r),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.nameUser),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(1),e.\u0275\u0275property("searchLoader",n.eventSearch)("queryParams",n.queryParams)}},dependencies:[p.Fj,p.JJ,p.On,z.w,w.bd,u.t3,u.SK,v.Ls,h.Zp,h.gB,h.ke,L.M,be.J,y.yS]}),o})();var Ue=s(834);const Ie=[{path:"",component:O,data:{title:"Herramientas ",headerDisplay:"none"}},{path:"users",component:Te,data:{title:"Usuarios Registrados ",headerDisplay:"none"}},{path:"orders",component:Pe,data:{title:"Pedidos Registrados ",headerDisplay:"none"}},{path:"cash",component:(()=>{class o{constructor(t,n){this.apiService=t,this.modalService=n,this.currentDate=new Date,this.amountStore=0,this.amountProduct=0}ngOnInit(){this.loadData()}onChangeDate(t){this.loadData()}loadData(){this.apiService.getUserCashFlow({year:this.currentDate.getFullYear(),month:this.currentDate.getMonth()+1}).subscribe(t=>{console.log(t),this.amountStore=0==t.data.orders.length?0:t.data.orders?.map(n=>n.payment_order.amount)?.reduce((n,a)=>parseFloat(n)+parseFloat(a))??0,this.amountProduct=0==t.data.products.length?0:t.data.products?.map(n=>n.amount)?.reduce((n,a)=>parseFloat(n)+parseFloat(a))??0})}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(C.s),e.\u0275\u0275directiveInject(T.Z))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-tools-cash-page"]],decls:42,vars:22,consts:[[2,"border","0"],[1,"m-b-20"],[1,"m-b-20",3,"nzXs"],[1,"d-flex","align-items-center"],["routerLink","/admin/tools",1,"text-black-2"],["nz-icon","","nzType","arrow-left","nzTheme","outline",1,"font-size-26"],[1,"m-0","text-black-2"],[1,"m-b-20","text-center",3,"nzLg","nzMd","nzXs"],["nzInline","","nzMode","month",3,"ngModel","ngModelChange"],[1,"m-b-20",3,"nzLg","nzMd","nzXs"],[1,"d-flex","align-items-center","card--cash","m-b-30"],[1,"fs-20","fw-500","text-black-general","m-0"],[1,"fs-15","text-black-general","m-0"],[2,"padding","5px"],["src","assets/images/523f06182f48b2df26878e57a23aa193d8337b20-cropped.png","alt","",2,"width","60px"],["nz-icon","","nzType","arrow-right","nzTheme","outline",1,"text-black-general","fs-15"],[1,"d-flex","align-items-center","card--cash","card--cash--min","m-b-30"],["src","assets/images/db81e052cded511188b59264468e751cda4d782d-cropper.png","alt","",2,"width","30px"],[1,"fs-22","fw-700","text-black-general","m-0"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"nz-card",0)(1,"nz-row",1)(2,"nz-col",2)(3,"div",3)(4,"a",4),e.\u0275\u0275element(5,"i",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(6,"\xa0\xa0\xa0\xa0 "),e.\u0275\u0275elementStart(7,"h3",6),e.\u0275\u0275text(8,"Resumen de Ingresos - "),e.\u0275\u0275elementStart(9,"span"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"date"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(12,"nz-row",1)(13,"nz-col",7)(14,"nz-date-picker",8),e.\u0275\u0275listener("ngModelChange",function(r){return n.currentDate=r})("ngModelChange",function(r){return n.onChangeDate(r)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"nz-col",9)(16,"div",10)(17,"div")(18,"p",11),e.\u0275\u0275text(19,"Flujo de caja de ingresos"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"p",12),e.\u0275\u0275text(21,"Aqu\xed solo se ve el resumen de los ingresos generados por ventas en los canales oficiales (Pagoefectivo / Tarjetas)"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",13),e.\u0275\u0275element(23,"img",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div"),e.\u0275\u0275element(25,"i",15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",16)(27,"div"),e.\u0275\u0275element(28,"img",17),e.\u0275\u0275elementStart(29,"p",18),e.\u0275\u0275text(30),e.\u0275\u0275pipe(31,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"p",12),e.\u0275\u0275text(33,"Ingresos por venta de productos en tienda"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(34,"div",16)(35,"div"),e.\u0275\u0275element(36,"img",17),e.\u0275\u0275elementStart(37,"p",18),e.\u0275\u0275text(38),e.\u0275\u0275pipe(39,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"p",12),e.\u0275\u0275text(41,"Ingresos por venta de paquetes de afiliaci\xf3n (Nuevos)"),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("nzXs",24),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind4(11,11,n.currentDate,"MMMM","","es-ES")),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzLg",8)("nzMd",12)("nzXs",24),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.currentDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzLg",16)("nzMd",12)("nzXs",24),e.\u0275\u0275advance(15),e.\u0275\u0275textInterpolate1("S/ ",e.\u0275\u0275pipeBind2(31,16,n.amountProduct,"1.2"),""),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate1("S/ ",e.\u0275\u0275pipeBind2(39,19,n.amountStore,"1.2"),""))},dependencies:[p.JJ,p.On,z.w,w.bd,Ue.uw,u.t3,u.SK,v.Ls,y.yS,g.JJ,g.uU],styles:[".card--cash[_ngcontent-%COMP%]{border-radius:16px;padding:8px 12px;border:1px solid #1C1B1F;width:500px}.card--cash.card--cash--min[_ngcontent-%COMP%]{width:300px}"]}),o})(),data:{title:"Flujo de Caja ",headerDisplay:"none"}}];let we=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[X.m,g.ez,y.Bz.forChild(Ie),y.Bz]}),o})()}}]);