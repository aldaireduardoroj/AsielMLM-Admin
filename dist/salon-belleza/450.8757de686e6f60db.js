"use strict";(self.webpackChunksalon_belleza=self.webpackChunksalon_belleza||[]).push([[450],{1663:(O,g,r)=>{r.r(g),r.d(g,{TreeUsersPageModule:()=>I});var p=r(6895),v=r(1911),c=r(3211),m=r(2340),u=r(2619),x=r(9802),C=r(567),e=r(4650),z=r(4988),S=r(7),b=r(1971),h=r(3679),y=r(5759);function P(o,d){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"img",29),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext().$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("src",t.data.photo,e.\u0275\u0275sanitizeUrl)("nzFallback",n.fallback)}}function T(o,d){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(1,"svg",30),e.\u0275\u0275element(2,"path",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd())}const E=function(){return{"background-color":"#00B517"}};function L(o,d){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onSeletedUSer(l.data.id))}),e.\u0275\u0275elementStart(1,"div",26)(2,"p",27),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,P,2,2,"ng-container",18),e.\u0275\u0275template(5,T,3,0,"ng-container",18),e.\u0275\u0275elementStart(6,"div",28),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()}if(2&o){const t=d.$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.data.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.data.admin),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.data.admin),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",t.isActive?e.\u0275\u0275pureFunction0(5,E):null),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ID: ",t.data.id," ")}}function U(o,d){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"app-tree-view",22,23),e.\u0275\u0275template(3,L,8,6,"ng-template",null,24,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275reference(4),n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("data",n.data)("template",t)}}let A=(()=>{class o{constructor(t,n){this.apiService=t,this.nzModalService=n,this.Orientation=v.i5,this.nodeSelected=null,this.isChart=!1,this.environment=m.N,this.fallback=u.t.IMAGE.FALLBACK,this.usuarioDirectos=0,this.usuarioActivos=0,this.usuarioTotal=0,this.userSponsor="--",this.codeSponsor="--",this.listPoints=[]}ngOnInit(){this.isChart=!1,(0,C.D)(this.apiService.getPointListUser()).subscribe(([t])=>{let n=t.data.user,s=t.data.points,l=this.nodeTreeParse(s,(0,c.bX)());if(0==l.length)for(let a=0;a<4;a++)l.push({data:{id:""+1*a,photo:"assets/images/Ellipse 4.png",name:"Usuario "+1*a},active:!1,selected:!0,children:[],admin:!1});let i=n.file?m.N.hostUrl+"/storage/"+n.file.path:this.fallback;this.data={data:{id:(0,c.bX)(),photo:i,admin:n?.is_admin??!1,name:n?.name},active:n.payment?.state==u.t.PAYMENT_ORDER.PAGADO,selected:!0,children:l},this.codeSponsor=s.find(a=>a.user_code.toLowerCase()==(0,c.bX)().toLowerCase()&&""!=a.sponsor_code&&1==a.payment)?.sponsor_code??"--",this.userSponsor=s.find(a=>a.user_code.toLowerCase()==(0,c.bX)().toLowerCase()&&""!=a.sponsor_code&&1==a.payment)?.sponsor?.name??"--",this.usuarioDirectos=s.filter(a=>a.sponsor_code.toLowerCase()==(0,c.bX)().toLowerCase()&&1==a.payment).length,this.listPoints=s,this.isChart=!0})}nodeTreeParse(t,n){let s=[],l=t.filter(i=>i.sponsor_code.toLowerCase()==n.toLowerCase()&&1==i.payment);return this.usuarioTotal+=l.length,l.forEach(i=>{let a=i?.user?.payment?.state==u.t.PAYMENT_ORDER.PAGADO;a&&this.usuarioActivos++;let f=this.fallback;null!=i.user?.file&&(f=m.N.hostUrl+"/storage/"+(i.user?.file?.path??""));let X={data:{id:i.user_code,photo:f,email:i.user?.email??"",name:i.user?.name},selected:!0,active:a,children:this.nodeTreeParse(t,i.user_code),admin:i.user?.is_admin??!1};s.push(X)}),s}selectSlibingNodes(t,n){if(n==this.nodeSelected)this.nodeSelected=null,t.nodes.forEach(s=>{s.isSelected=!1});else{this.nodeSelected=n;const s=t.getSlibingNodes(n).map(l=>l.id);t.nodes.forEach(l=>{l.isSelected=l.id==n.id||s.indexOf(l.id)>=0})}}onSeletedUSer(t){if("-1"==t)return;let n=this.listPoints.find(s=>s.user_code==t);this.nzModalService.create({nzTitle:"Detalle",nzContent:x.Z,nzFooter:null,nzComponentParams:{userModel:n.user,listPoints:this.listPoints,paymentOrder:n.user?.payment,pointTotal:n.pointTotal}})}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(z.s),e.\u0275\u0275directiveInject(S.Sf))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-tree-users-page"]],decls:45,vars:18,consts:[[1,"m-b-20",2,"border","0"],[1,"m-b-20"],[1,"text-center","p-l-10","p-r-10","border--in-mobile",3,"nzLg","nzXs"],[1,"text-details"],[1,"m-0",2,"color","#C4C4C4"],[1,"text-center","p-l-10","p-r-10",2,"border-left","1px solid #C4C4C4",3,"nzLg","nzXs"],[2,"border","0"],[1,"position-relative","p-t-30",3,"nzLg","nzXs"],[1,"text-center","m-0",2,"color","#C4C4C4","font-size","16px","line-height","1.2"],[1,"text-center"],[2,"text-transform","uppercase"],[1,"position-absolute","d-none","d-md-block",2,"width","200px","right","0","top","30px"],[1,"d-flex","align-items-center","m-b-10"],[2,"display","inline-block","width","30px","height","25px","border-radius","5px","background-color","#00B517"],[1,"d-flex","align-items-center"],[2,"display","inline-block","width","30px","height","25px","border-radius","5px","background-color","#C4C4C4"],[1,"p-b-30",3,"nzLg","nzXs"],[2,"overflow-y","auto","width","100%","padding-right","25px","padding-left","20px","padding-bottom","40px"],[4,"ngIf"],[1,"d-md-block","d-lg-none",3,"nzLg","nzXs"],[1,"d-flex","justify-content-center","m-t-30"],[2,"width","200px"],[3,"data","template"],["treeView",""],["treeTemplate",""],[1,"item",3,"click"],[1,"text-name-node","text-center"],[1,"m-0","line-height-1"],[1,"item--flotating","text-uppercase",3,"ngStyle"],["alt","",2,"width","100%","height","100%","border-radius","50%",3,"src","nzFallback"],["xmlns","http://www.w3.org/2000/svg","width","68","height","68","viewBox","0 0 68 68","fill","none"],["d","M33.7676 0.499023C52.0988 0.499023 66.9598 15.3593 66.96 33.6904C66.96 52.0218 52.0989 66.8828 33.7676 66.8828C15.4364 66.8827 0.576172 52.0217 0.576172 33.6904C0.576322 15.3594 15.4365 0.499174 33.7676 0.499023ZM33.7676 37.4023C25.0683 37.4023 17.5734 42.5551 14.167 49.9727L14.0332 50.2646L14.2432 50.5078C18.9679 55.9883 25.9625 59.4599 33.7676 59.46C41.5727 59.46 48.5682 55.9893 53.293 50.5088L53.502 50.2656L53.3682 49.9736C49.9618 42.5556 42.467 37.4023 33.7676 37.4023ZM33.7676 12.1338C28.8397 12.1339 24.8447 16.1287 24.8447 21.0566C24.8449 25.9844 28.8398 29.9793 33.7676 29.9795C38.6956 29.9795 42.6903 25.9845 42.6904 21.0566C42.6904 16.1286 38.6957 12.1338 33.7676 12.1338Z","fill","#6E7D96","stroke","#979797"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"nz-card",0)(1,"nz-row",1)(2,"nz-col",2)(3,"h1",3),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"p",4),e.\u0275\u0275text(6,"Personas totales en tu red"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"nz-col",5)(8,"h1",3),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"p",4),e.\u0275\u0275text(11,"Directos"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"nz-col",5)(13,"h1",3),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",4),e.\u0275\u0275text(16,"Usuarios Activos"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(17,"nz-card",6)(18,"nz-row",1)(19,"nz-col",7)(20,"p",8),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"p",9),e.\u0275\u0275text(23," ID: "),e.\u0275\u0275elementStart(24,"b",10),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",11)(27,"div",12),e.\u0275\u0275element(28,"span",13),e.\u0275\u0275text(29,"\xa0\xa0Usuario Activo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",14),e.\u0275\u0275element(31,"span",15),e.\u0275\u0275text(32,"\xa0\xa0Usuario Desactivo"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(33,"nz-col",16)(34,"div",17),e.\u0275\u0275template(35,U,5,2,"ng-container",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"nz-col",19)(37,"div",20)(38,"div",21)(39,"div",12),e.\u0275\u0275element(40,"span",13),e.\u0275\u0275text(41,"\xa0\xa0Usuario Activo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"div",14),e.\u0275\u0275element(43,"span",15),e.\u0275\u0275text(44,"\xa0\xa0Usuario Desactivo"),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("nzLg",8)("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.usuarioTotal),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzLg",8)("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.usuarioDirectos),e.\u0275\u0275advance(3),e.\u0275\u0275property("nzLg",8)("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.usuarioActivos),e.\u0275\u0275advance(5),e.\u0275\u0275property("nzLg",24)("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Tu patrocinador es ",n.userSponsor,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(n.codeSponsor),e.\u0275\u0275advance(8),e.\u0275\u0275property("nzLg",24)("nzXs",24),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isChart),e.\u0275\u0275advance(1),e.\u0275\u0275property("nzLg",24)("nzXs",24))},dependencies:[p.O5,p.PC,b.bd,h.t3,h.SK,y.k],styles:[".item[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:transparent;color:#fff;box-shadow:0 .125rem .25rem #00000013;border-radius:50%;cursor:pointer;border:3px solid transparent;position:relative}.item[_ngcontent-%COMP%]   .item--flotating[_ngcontent-%COMP%]{position:absolute;bottom:-24px;background:#D9D9D9;padding:2px;text-transform:uppercase;line-height:1;color:#202224;text-align:center;font-size:13px;z-index:2;width:90px;left:-12px}.item[_ngcontent-%COMP%]   .text-name-node[_ngcontent-%COMP%]{position:absolute;top:-43px;background-color:#fff;padding-top:4px;padding-bottom:4px}"]}),o})();var D=r(7396),M=r(9300);const w=[{path:"",component:A,data:{title:"Arbol ",headerDisplay:"none"}}];let I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[D.Bz.forChild(w),M.m,p.ez]}),o})()}}]);